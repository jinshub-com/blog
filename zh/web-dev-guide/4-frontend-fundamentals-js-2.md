# ç¬¬å››è¯¾ï¼šå‰ç«¯åŸºç¡€ - JavaScript è¿›é˜¶

## è¯¾ç¨‹ç›®æ ‡
1. ç†è§£å¹¶åº”ç”¨ **Promise** å’Œ **async/await**
2. ä½¿ç”¨ Fetch API è¿›è¡Œæ•°æ®è¯·æ±‚
3. å­¦ä¹ æ¨¡å—åŒ–å¼€å‘ï¼ˆimport/exportï¼‰
4. åˆ©ç”¨ Node.js + npm + Vite åˆ›å»ºå’Œè¿è¡Œé¡¹ç›®

## 1. å¼‚æ­¥ç¼–ç¨‹ (Asynchronous Programming) å’Œ éé˜»å¡ï¼ˆNon-blockingï¼‰

åœ¨ JavaScript ä¸­ï¼Œå¼‚æ­¥ç¼–ç¨‹æ˜¯ä¸€ä¸ªå…³é”®æ¦‚å¿µã€‚é€šè¿‡å¼‚æ­¥ç¼–ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æœªæ¥çš„æŸä¸ªæ—¶é—´ç‚¹è¿è¡Œç‰¹å®šçš„ä»»åŠ¡ï¼Œå¹¶ä¸”ä¸é˜»å¡å½“ä¸‹è¿è¡Œçš„å…¶å®ƒä»»åŠ¡ã€‚

è¯¦ç»†ä»‹ç»å¼‚æ­¥ç¼–ç¨‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥è®¤è¯†ä¸‹ä»€ä¹ˆæ˜¯åŒæ­¥ï¼ˆSynchronousï¼‰å’Œé˜»å¡ï¼ˆBlockingï¼‰ã€‚å…¶å®æˆ‘ä»¬ç›®å‰å†™çš„å¤§éƒ¨åˆ†ä»£ç éƒ½æ˜¯åŒæ­¥é˜»å¡çš„ï¼ŒåŒæ­¥é˜»å¡ä»£ç æŒ‰é¡ºåºä»ä¸Šåˆ°ä¸‹æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´åé¢çš„ä»£ç ç­‰åˆ°å‰é¢çš„ä»£ç è¿è¡Œå®Œåæ‰ä¼šè¿è¡Œã€‚æ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š

```javascript
console.log("æ¥åˆ‡ä¸€ç‚¹ç‚¹è‘±èŠ± å¤‡ç”¨");
console.log("å†æ¥ä¸€ç‚¹ç‚¹è’œè“‰ å¤‡ç”¨");
sleepFor(3); // å°ç¡ 3 ç§’å†åˆ‡é¦™èœï¼ŒåŒæ­¥é˜»å¡ä»£ç ç¤ºä¾‹ï¼ˆåˆ‡å‹¿åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨ï¼ï¼‰
console.log("è¦åˆ‡ä¸€ç‚¹ç‚¹é¦™èœ");
console.log("å†æ”¾å‡ å‹º ç›");
console.log("é¢é¢å‡†å¤‡å¥½äº†");
function sleepFor(sleepDuration){
    var now = new Date().getTime();
    while(new Date().getTime() < now + sleepDuration * 1000){ /* Do nothing */ }
}
```

è¿™æ®µä»£ç æ°¸è¿œéƒ½æ˜¯å…ˆåˆ‡è‘±èŠ±å†åŠ è’œè“‰å†åˆ‡é¦™èœã€‚å¦‚æœåŠ è’œè“‰ä¹‹åç¡äº† 3 ç§’ç§ï¼Œåˆ‡é¦™èœå°±å¾—ç­‰ 3 ç§’é’Ÿã€‚å¤§éƒ¨åˆ†ä»£ç è¿è¡Œèµ·æ¥å¾ˆå¿«ï¼Œæˆ‘ä»¬æ„Ÿè§‰ä¸åˆ°å»¶è¿Ÿï¼Œä½†ä¸æ˜¯æ‰€æœ‰ä»£ç éƒ½èƒ½ç¬é—´å®Œæˆçš„ï¼Œæ¯”å¦‚å‘åç«¯è¯·æ±‚æ•°æ®ã€‚

å‡å¦‚ä»Šå¤©ç½‘ç‰¹åˆ«å¡ï¼Œå¯èƒ½ç­‰äº† 10 ç§’åç«¯æ‰ä¼ å›äº†æ•°æ®ï¼Œåˆå‡è®¾æ‰€æœ‰ä»£ç éƒ½æ˜¯åŒæ­¥é˜»å¡çš„ï¼Œç­‰å¾…æœŸé—´å°±ä¸èƒ½è¿è¡Œå…¶å®ƒçš„ JavaScript ä»£ç ï¼Œç½‘é¡µå°±å¡ä½äº†ã€‚ä¸ºä»€ä¹ˆå¡ä½äº†ï¼Ÿæƒ³è±¡ä¸‹ç”¨æˆ·åœ¨è¿™ 10 ç§’æœŸé—´ç‚¹äº†æŸä¸ªæŒ‰é’®ï¼Œä¼šå‘ç°æ²¡æœ‰ä»»ä½•ååº”ï¼Œå› ä¸ºæ‰€æœ‰ä»£ç éƒ½æ˜¯åŒæ­¥é˜»å¡çš„ï¼Œç‚¹æŒ‰é’®è¦æ‰§è¡Œçš„ä»£ç è¦ç­‰å‰é¢ç½‘ç»œè¯·æ±‚çš„ä»£ç è¿è¡Œå®Œæ‰èƒ½æ‰§è¡Œã€‚

å› æ­¤æˆ‘ä»¬éœ€è¦å¼‚æ­¥ç¼–ç¨‹æ¥å®ç°éé˜»å¡ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ç”¨ **setTimeout** æ–¹æ³•æ¥æ¨¡æ‹Ÿä¸€ç»„å¤æ‚çš„å¼‚æ­¥ä»»åŠ¡ã€‚åé¢ä»‹ç» **Fetch API** æ—¶ä¼šçœ‹åˆ°çœŸå®ç½‘ç»œè¯·æ±‚å¼‚æ­¥ä»£ç æ˜¯æ€ä¹ˆå†™çš„ã€‚

### setTimeout
- **æ ¸å¿ƒå®šä¹‰**ï¼šå»¶è¿Ÿæ‰§è¡Œä¸€æ®µä»£ç ã€‚
- **ä¸ºä»€ä¹ˆé‡è¦**ï¼šå®ç°å®šæ—¶ä»»åŠ¡ï¼Œæ§åˆ¶å‡½æ•°è°ƒç”¨æ—¶æœºã€‚
- **å…¸å‹åº”ç”¨**ï¼š æ˜¾ç¤ºå€’è®¡æ—¶ï¼Œç®€å•å»¶è¿Ÿä»»åŠ¡
- **ä»£ç ç¤ºä¾‹**ï¼š
    ```javascript
	// æ¨¡æ‹Ÿç”¨æˆ·ç™»å½•åéœ€è¦ä¾æ¬¡æ‰§è¡Œçš„å¤æ‚å¼‚æ­¥æ“ä½œ
	// å¯ä»¥å¤åˆ¶è¿™æ®µä»£ç åˆ°æµè§ˆå™¨æ§åˆ¶å°ï¼ˆconsoleï¼‰ä¸­è¿è¡Œ
	console.log("[1/4] æ¨¡æ‹Ÿç”¨æˆ·å¼€å§‹ç™»å½•ï¼ˆå‡è®¾2ç§’åæˆåŠŸï¼‰...");
	setTimeout(() => {
		console.log("[1/4] âœ… æ¨¡æ‹Ÿç™»å½•æˆåŠŸï¼Œåç«¯è¿”å›äº†ç”¨æˆ·ä¿¡æ¯"); 
		const user = { name: "Tom", id: 123 };
		console.log(`[2/4] æ¨¡æ‹Ÿæ˜¾ç¤ºæ¬¢è¿å¼¹çª—ï¼šæ¬¢è¿å›æ¥ï¼Œ${user.name}ï¼ï¼ˆå‡è®¾ç”¨æˆ·ç›¯ç€å¼¹çª—çœ‹äº†6ç§’ï¼‰...`);
		setTimeout(() => {
			console.log("[3/4] ğŸ–±ï¸ ç”¨æˆ·ç‚¹å‡»å…³é—­æŒ‰é’®ï¼Œä½†æ˜¯æ‰‹æŠ–ç‚¹åˆ°äº†å¹¿å‘Šï¼Œè·³è½¬åˆ°å¹¿å‘Šé¡µé¢ï¼ˆå‡è®¾3ç§’åè·³è½¬åˆ°å¹¿å‘Šé¡µé¢ï¼‰ ...");
			setTimeout(() => {
				console.log("[4/4] ğŸ“Š ç”¨æˆ·å¼€å§‹çœ‹å¹¿å‘Šäº†ï¼Œâ€œä¸‹é¢æœ‰è¯·å°Šè´µçš„...â€");
			}, 3000);
		}, 6000);
	}, 2000);
	console.log("è¿™é‡Œæµè§ˆå™¨ä¼šç»§ç»­æ‰§è¡Œä¸‹é¢çš„å…¶å®ƒä»£ç ï¼Œä¸ä¼šå› ä¸º setTimeout å†…éƒ¨çš„å¼‚æ­¥æ“ä½œè¿˜æ²¡æ‰§è¡Œè€Œå¡ä½"); // [!code highlight]
    ```

åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬è°ƒç”¨ setTimeout æ—¶ä¼ é€’çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œè¿™ä¸ªç®­å¤´å‡½æ•°å°±æ˜¯ä¸€ä¸ª**å›è°ƒå‡½æ•°ï¼ˆcallbackï¼‰**ï¼ˆä½œä¸ºå‚æ•°ä¼ é€’çš„å‡½æ•°ï¼Œåœ¨æœªæ¥ç‰¹å®šæ—¶æœºæ‰§è¡Œï¼‰ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œè¡¨ç¤ºç­‰å¾…å¤šå°‘æ¯«ç§’ï¼ˆ1000 æ¯«ç§’ = 1 ç§’ï¼‰åæ‰§è¡Œå›è°ƒå‡½æ•°ã€‚å¦‚æœåœ¨æµè§ˆå™¨é‡Œè¿è¡Œä¸Šè¯‰ä»£ç ï¼Œä½ ä¼šå‘ç°æœ€åä¸€è¡Œ console.log ä»£ç ä¼šå…ˆäºå›è°ƒå‡½æ•°æ‰§è¡Œï¼Œå› ä¸ºè¿™äº›ä¼ å…¥ setTimeout çš„å›è°ƒå‡½æ•°æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œæ‰€ä»¥ä¸ä¼šé˜»å¡ setTimeout åé¢å…¶å®ƒä»£ç æ‰§è¡Œã€‚

å›è°ƒå‡½æ•°æ˜¯ä¸€ç§ç®€å•æœ‰æ•ˆçš„åŒæ­¥é˜»å¡é—®é¢˜è§£å†³æ–¹æ¡ˆï¼Œä½†å½“å¼‚æ­¥æ“ä½œè¶Šæ¥è¶Šå¤šï¼Œä¸”äº’ç›¸ä¾èµ–æ—¶ï¼Œå›è°ƒå‡½æ•°åµŒå¥—è¶Šæ¥è¶Šæ·±ï¼Œä»£ç å°†ä¼šå˜å¾—éš¾ä»¥ç»´æŠ¤ï¼Œè¿™ç§ç°è±¡è¢«ç§°ä¸ºå›è°ƒåœ°ç‹±ï¼ˆCallback Hellï¼‰ã€‚æ¥ä¸‹æ¥å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ Promise é“¾å¼è°ƒç”¨å’Œ async/await è¯­æ³•ï¼Œæ”¹å†™ä¸Šè¿°ä»£ç ä½¿å…¶æ›´å®¹æ˜“ç†è§£å’Œç»´æŠ¤ã€‚

### Promise
- **æ ¸å¿ƒå®šä¹‰**ï¼šå¼‚æ­¥ç¼–ç¨‹çš„å¦ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚
- **ä¸ºä»€ä¹ˆé‡è¦**ï¼šå‡ ä¹æ‰€æœ‰ç°ä»£ JavaScript å¼‚æ­¥ API éƒ½æ˜¯åŸºäº Promise çš„ã€‚
- **å…¸å‹åº”ç”¨**ï¼šæ§åˆ¶å¤æ‚çš„å¼‚æ­¥é€»è¾‘ã€‚æ›´å¤šç”¨æ³•è¯·çœ‹ [MDN Promise æ–‡æ¡£](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise)
- **ä»£ç ç¤ºä¾‹**ï¼š
    ```javascript
	// ä½¿ç”¨ Promise æ”¹å†™ä¸Šé¢çš„ä¾‹å­
	// å°†æ¯ä¸ªæ­¥éª¤å°è£…æˆè¿”å› Promise çš„å‡½æ•°
	function simulateLogin() {
		return new Promise(resolve => {
			console.log("[1/4] æ¨¡æ‹Ÿç”¨æˆ·å¼€å§‹ç™»å½•ï¼ˆå‡è®¾2ç§’åæˆåŠŸï¼‰...");
			setTimeout(() => {
				console.log("[1/4] âœ… æ¨¡æ‹Ÿç™»å½•æˆåŠŸï¼Œåç«¯è¿”å›äº†ç”¨æˆ·ä¿¡æ¯");
				const user = { name: "Tom", id: 123 };
				resolve(user);
			}, 2000);
		});
	}

	function showWelcomePopup(user) {
		return new Promise(resolve => {
			console.log(`[2/4] æ¨¡æ‹Ÿæ˜¾ç¤ºæ¬¢è¿å¼¹çª—ï¼šæ¬¢è¿å›æ¥ï¼Œ${user.name}ï¼ï¼ˆå‡è®¾ç”¨æˆ·ç›¯ç€å¼¹çª—çœ‹äº†6ç§’ï¼‰...`);
			setTimeout(resolve, 6000);
		});
	}

	function handleAdRedirect() {
		return new Promise(resolve => {
			console.log("[3/4] ğŸ–±ï¸ ç”¨æˆ·ç‚¹å‡»å…³é—­æŒ‰é’®ï¼Œä½†æ˜¯æ‰‹æŠ–ç‚¹åˆ°äº†å¹¿å‘Šï¼Œè·³è½¬åˆ°å¹¿å‘Šé¡µé¢ï¼ˆå‡è®¾3ç§’åè·³è½¬åˆ°å¹¿å‘Šé¡µé¢ï¼‰ ...");
			setTimeout(() => {
				console.log("[4/4] ğŸ“Š ç”¨æˆ·å¼€å§‹çœ‹å¹¿å‘Šäº†ï¼Œâ€œä¸‹é¢æœ‰è¯·å°Šè´µçš„...â€");
				resolve();
			}, 3000);
		});
	}

	// ä½¿ç”¨ Promise é“¾å¼è°ƒç”¨ä¸€ç»„å¼‚æ­¥æ“ä½œ
	function userFlow() {
		simulateLogin() // [!code highlight]
			.then(showWelcomePopup) // [!code highlight]
			.then(() => handleAdRedirect()) // [!code highlight]
			.catch(error => console.error("æµç¨‹å¼‚å¸¸:", error));
	}

	// æ‰§è¡Œæµç¨‹
	userFlow();
	console.log("è¿™é‡Œæµè§ˆå™¨ä¼šç»§ç»­æ‰§è¡Œä¸‹é¢çš„å…¶å®ƒä»£ç ï¼Œä¸ä¼šå› ä¸º userFlow å†…éƒ¨çš„å¼‚æ­¥æ“ä½œè¿˜æ²¡æ‰§è¡Œè€Œå¡ä½");
	```

å¯¹äºä¸€ä¸ªçœŸå®çš„é¡¹ç›®ï¼Œé€šè¿‡ Promise æˆ‘ä»¬å¯ä»¥æŠŠä¸åŒæ“ä½œå®šä¹‰åœ¨ä¸åŒå‡½æ•°é‡Œï¼Œä½¿ç”¨æ—¶ä»»æ„ç»„åˆï¼Œèƒ½è®©ä»£ç æ›´æ¸…æ™°æ˜“æ‡‚ã€‚

#### Promise.all

Promise.all æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å·¥å…·ï¼Œç”¨äºå¤„ç†å¤šä¸ªå¹¶è¡Œçš„å¼‚æ­¥æ“ä½œã€‚å®ƒå¯ä»¥æ¥å—ä¸€ä¸ª Promise å¯¹è±¡æ•°ç»„ï¼Œå¹¶åœ¨æ‰€æœ‰ Promise éƒ½æˆåŠŸå®Œæˆåè¿”å›ä¸€ä¸ªåŒ…å«æ¯ä¸ªç»“æœçš„æ•°ç»„ã€‚å¦‚æœå…¶ä¸­ä»»ä½•ä¸€ä¸ª Promise è¢«æ‹’ç»ï¼Œåˆ™ä¼šç«‹å³è¿”å›è¿™ä¸ªè¢«æ‹’ç»çš„åŸå› ã€‚

å‡è®¾æˆ‘ä»¬æœ‰ä¸€äº›ç‹¬ç«‹çš„æ“ä½œï¼ˆæ¯”å¦‚åŠ è½½ç”¨æˆ·ä¿¡æ¯ã€è·å–å¹¿å‘Šæ•°æ®ç­‰ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Promise.all æ¥å¹¶è¡Œæ‰§è¡Œè¿™äº›æ“ä½œï¼Œè€Œä¸æ˜¯ä¸²è¡Œæ‰§è¡Œã€‚ä¸‹é¢ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š
```javascript
// Promise.resolve 
const asyncTask1 = () => Promise.resolve(1); // æ¨¡æ‹Ÿä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œæœ€åè¿”å›æ•°å­— 1
const asyncTask2 = () => Promise.resolve(2); // æ¨¡æ‹Ÿä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œæœ€åè¿”å›æ•°å­— 2
const asyncTask3 = () => Promise.resolve(3); // æ¨¡æ‹Ÿä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œæœ€åè¿”å›æ•°å­— 3
const runAllAsyncTasksTogether = () => Promise.all([asyncTask1(), asyncTask2(), asyncTask3()]);
runAllAsyncTasksTogether()
	.then(results => {
		// 3 ä¸ªå¼‚æ­¥æ“ä½œéƒ½å®Œæˆåè¿è¡Œ
		console.log(results) // è¾“å‡º [1, 2, 3]
	});
```

æ¥ä¸‹æ¥æˆ‘ä»¬å­¦ä¹ å¦å¤–ä¸€ç§éå¸¸å¸¸ç”¨çš„å¼‚æ­¥ç¼–ç¨‹æ–¹å¼ **async/await**ã€‚

### async/await
- **æ ¸å¿ƒå®šä¹‰**ï¼šç”¨äºè¿›ä¸€æ­¥ç®€åŒ–å¤„ç†åŸºäº Promise çš„å¼‚æ­¥æ“ä½œã€‚
- **ä¸ºä»€ä¹ˆé‡è¦**ï¼šå¼‚æ­¥æ“ä½œå®åœ¨æ˜¯å¤ªå¸¸è§äº†ï¼ŒJavaScript å¼€å‘è€…åˆç»å¸¸ä½¿ç”¨ async/await æ¥ç¼–å†™å¼‚æ­¥æ“ä½œï¼Œæ‰€ä»¥ä¸€å®šè¦ç†Ÿæ‚‰ã€‚
- **å…¸å‹åº”ç”¨**ï¼šæ§åˆ¶å¤æ‚çš„å¼‚æ­¥é€»è¾‘ã€‚
- **ä»£ç ç¤ºä¾‹**ï¼š
    ```javascript
	// ä½¿ç”¨ async/await æ”¹å†™ä¸Šé¢çš„ä¾‹å­

	// å°è£…åŸºç¡€æ“ä½œå‡½æ•°ï¼ˆä¸ Promise ç‰ˆæœ¬ç›¸åŒï¼‰
	// æ­¤å¤„çœç•¥ simulateLogin ç­‰å‡½æ•°çš„é‡å¤å®šä¹‰...

	// ä½¿ç”¨ async/await çš„ä¸»æµç¨‹
	async function userFlow() {
		try {
			const user = await simulateLogin(); // [!code highlight]
			await showWelcomePopup(user); // [!code highlight]
			await handleAdRedirect(); // [!code highlight]
		} catch (error) {
			console.error("æµç¨‹å¼‚å¸¸:", error);
		}
	}

	// æ‰§è¡Œæµç¨‹
	userFlow();
	console.log("è¿™é‡Œæµè§ˆå™¨ä¼šç»§ç»­æ‰§è¡Œä¸‹é¢çš„å…¶å®ƒä»£ç ï¼Œä¸ä¼šå› ä¸º userFlow å†…éƒ¨çš„å¼‚æ­¥æ“ä½œè¿˜æ²¡æ‰§è¡Œè€Œå¡ä½");
    ```

async å‡½æ•°æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªè¿”å› Promise çš„å‡½æ•°ï¼Œå…¶å†…éƒ¨çš„ await ä¼šæš‚åœå‡½æ•°æ‰§è¡Œï¼Œç›´åˆ°å³ä¾§çš„ Promise å®Œæˆã€‚è¯­æ³•ä¸Šæ›´åƒåŒæ­¥ä»£ç ï¼Œä½†åº•å±‚ä»æ˜¯å¼‚æ­¥ã€‚

åœ¨ä¸Šé¢çš„ä¾‹å­é‡Œï¼ŒuserFlow æ˜¯ä¸€ä¸ª async å‡½æ•°ï¼Œå®ƒå†…éƒ¨ `await showWelcomePopup(user)` ä¼šç­‰å¾… `const user = await simulateLogin()` è¿è¡Œå®Œæˆåå†è¿è¡Œã€‚ä½†å½“æˆ‘ä»¬è°ƒç”¨ **userFlow** æ—¶ï¼ˆå€’æ•°ç¬¬äºŒè¡Œï¼‰ï¼Œå‰é¢æ²¡åŠ  awaitï¼Œå› æ­¤æœ€åä¸€è¡Œçš„ **console.log** ä¸ä¼šç­‰ **userFlow** ä¸­çš„å¼‚æ­¥æ“ä½œå®Œæˆåæ‰è¿è¡Œã€‚

**async/await** ä¸æ˜¯å¿…é¡»çš„ï¼Œä½ å¯ä»¥åªä½¿ç”¨ **Promise** æ¥å®šä¹‰å’Œè°ƒç”¨å¼‚æ­¥éé˜»å¡å‡½æ•°ï¼Œä½†æ˜¯åœ¨ç°ä»£ JavaScript é¡¹ç›®é‡Œä½ ä¼šç»å¸¸çœ‹åˆ° **async/await**ï¼Œæ‰€ä»¥è¦éœ€è¦ç†è§£ async function å†…éƒ¨çš„ä»£ç æ‰§è¡Œé¡ºåºã€‚ç®€å•æ¥è¯´ï¼Œä»»ä½• await ä¸‹é¢çš„ä»£ç éƒ½è¦ç­‰ await å³è¾¹çš„å¼‚æ­¥æ“ä½œå®Œæˆåæ‰è¿è¡Œã€‚å¦‚æœä¸€ä¸ªå¼‚æ­¥æ“ä½œå·¦è¾¹æ²¡æœ‰ awaitï¼Œåˆ™ä¸‹é¢çš„ä»£ç ä¸ä¼šç­‰å¾…ã€‚

## 2. Fetch API

Fetch API å°±æ˜¯ä¸€ä¸ªåŸºäº **Promise** å®ç°çš„å¼‚æ­¥éé˜»å¡ APIï¼Œé€šå¸¸ç”¨äºå‰åç«¯æ•°æ®äº¤æ¢ã€‚

- **æ ¸å¿ƒå®šä¹‰**ï¼šç”¨äºå‘èµ·ç½‘ç»œè¯·æ±‚å¹¶å¤„ç†å“åº”ã€‚
- **ä¸ºä»€ä¹ˆé‡è¦**ï¼šç°ä»£çš„å‰ç«¯æ•°æ®äº¤äº’æ–¹å¼ï¼Œæ›¿ä»£äº† XMLHttpRequestï¼ˆAjaxï¼‰æŠ€æœ¯ã€‚
- **å…¸å‹åº”ç”¨**ï¼šè·å–æœåŠ¡å™¨æ•°æ®ï¼Œå‘é€æ•°æ®åˆ°æœåŠ¡å™¨
- **ä»£ç ç¤ºä¾‹**ï¼š
    ```javascript
	function getTodoItemById(id) {
		return fetch(`https://jsonplaceholder.typicode.com/todos/${id}`)
			.then(response => response.json())
			.then((data) => console.log(data))
			.catch(error => console.error("è¯·æ±‚å¤±è´¥:", error));
	}

	getTodoItemById(1);
    ```

	```javascript
	// ä½¿ç”¨ async/await æ”¹å†™ getTodoItemById å‡½æ•°
	async function fetchTodoItemById(id) {
		try {
			const response = await fetch(`https://jsonplaceholder.typicode.com/todos/${id}`);
			const data = await response.json();
			console.log(data);
		} catch (error) {
			console.error("è¯·æ±‚å¤±è´¥:", error);
		}
	}

	fetchTodoItemById(1);
	```

è¯´èµ·æ¥ Fetch API ä¸å¾—ä¸é¡ºä¾¿ä»‹ç»ä¸€ä¸‹ [JSONï¼ˆJavaScript Object Notationï¼‰](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/JSON)ï¼ŒJSON æ˜¯ä¸€ç§è½»é‡çº§çš„æ–‡æœ¬æ•°æ®äº¤æ¢æ ¼å¼ã€‚é€šå¸¸ç”¨äºå‰åç«¯ä¹‹é—´ä¼ è¾“æ•°æ®ã€‚å®ƒçš„è¯­æ³•ç±»ä¼¼äº JavaScript å¯¹è±¡å’Œæ•°ç»„ï¼Œä½¿ç”¨é”®å€¼å¯¹æ¥å­˜å‚¨æ•°æ®ã€‚ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œç”¨ JSON æ ¼å¼ä¼ è¾“ä¸€ä¸ªäººçš„ä¿¡æ¯ï¼š
```json
{
	"name": "John Doe",
	"age": 30,
	"email": "johndoe@example.com",
	"boy_friends": ["Alice", "Bob"],
	"hobbies": ["reading", "coding"],
	"address": {
		"street": "123 Main St",
		"city": "Anytown",
		"state": "CA"
	}
}
```

ä¸Šé¢ Fetch API ä¾‹å­é‡Œçš„åç«¯æ¥å£ https://jsonplaceholder.typicode.com/todos/1 è¿”å›çš„æ•°æ®å°±æ˜¯ä¸€ä¸ª JSON å¯¹è±¡ï¼š
```json
{
	"userId": 1,
	"id": 1,
	"title": "delectus aut autem",
	"completed": false
}
```
é€šè¿‡ key å‘½åçŒœæµ‹å«ä¹‰ï¼š
- userId: ç”¨æˆ· ID
- id: TODO ä»»åŠ¡ ID
- title: ä»»åŠ¡æ ‡é¢˜
- completed: ä»»åŠ¡æ˜¯å¦å·²å®Œæˆ

åé¢æˆ‘ä»¬ä¼šç»å¸¸è§åˆ° JSON æ ¼å¼çš„æ•°æ®ã€‚


## 3. æ¨¡å—åŒ–å¼€å‘
- **æ ¸å¿ƒå®šä¹‰**ï¼šå°†ä»£ç åˆ†å‰²æˆå¯é‡ç”¨çš„æ¨¡å—ã€‚
- **ä¸ºä»€ä¹ˆé‡è¦**ï¼šæé«˜ä»£ç ç»„ç»‡æ€§ï¼Œä¾¿äºç»´æŠ¤å’Œå¤ç”¨ã€‚
- **å…¸å‹åº”ç”¨**ï¼šåˆ›å»ºå¯é‡ç”¨çš„å‡½æ•°ï¼Œç»„ä»¶
- **ä»£ç ç¤ºä¾‹**ï¼š  
	`utils.js` æ–‡ä»¶ä¸­å¯¼å‡ºä¸€ä¸ªåä¸º `greet` çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å—ä¸€ä¸ªå‚æ•° `name` å¹¶è¿”å›é—®å€™è¯­ã€‚
    ```javascript
    // utils.js (å¯¼å‡ºå‡½æ•°)
    export function greet(name) {
        return `Hello, ${name}!`;
    }
    ```
	`main.js` æ–‡ä»¶ä¸­å¯¼å…¥å¹¶ä½¿ç”¨ `greet` å‡½æ•°ã€‚
    ```javascript
    // main.js (å¯¼å…¥å¹¶ä½¿ç”¨å‡½æ•°)
    import { greet } from './utils.js';
    console.log(greet("World")); // è¾“å‡º: Hello, World!
    ```

## 4. Node.js + NPM + Vite

ä¹‹å‰æˆ‘ä»¬ä¸€ç›´æ˜¯åœ¨æµè§ˆå™¨é‡Œè¿è¡Œ JavaScript çš„ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥ç§°æµè§ˆå™¨ä¸ºä¸€ä¸ª JavaScript è¿è¡Œç¯å¢ƒï¼Œè€Œ Node.js æ˜¯å¦å¤–ä¸€ä¸ªå¸¸ç”¨çš„ JavaScript è¿è¡Œç¯å¢ƒã€‚

æµè§ˆå™¨æä¾›å¾ˆå¤šäº† Web API æ¥å®ç° web åº”ç”¨å‰ç«¯çš„åŠŸèƒ½ï¼ŒNode.js æä¾›äº†å¾ˆå¤š web åº”ç”¨åç«¯éœ€è¦çš„ APIï¼Œæ¯”å¦‚æ–‡ä»¶è¯»å†™ã€ç½‘ç»œè¯·æ±‚ä¸å“åº”ç­‰ã€‚

Node.js ä¸ä»…å¯ä»¥ç”¨äºåç«¯å¼€å‘ï¼Œå¯¹å‰ç«¯åº”ç”¨å¼€å‘ä¹Ÿå¾ˆé‡è¦ã€‚ç”±äºç°ä»£å‰ç«¯é¡¹ç›®é€šå¸¸ä¸ä¼šç›´æ¥æŠŠæºç æ”¾åœ¨æµè§ˆå™¨é‡Œè¿è¡Œï¼Œè€Œæ˜¯é€šè¿‡ä¸€äº›å·¥å…·æ‰“åŒ…ä¼˜åŒ–åå†æä¾›ä¸€ä¸ªä½“ç§¯è¾ƒå°ï¼Œå…¼å®¹æ€§æ›´å¥½çš„ä»£ç ç»™ç”¨æˆ·ä½¿ç”¨ã€‚å¾ˆå¤šå‰ç«¯å¼€å‘å·¥å…·å°±æ˜¯ç”¨ Node.js æ¥å®ç°çš„ï¼Œæ¯”å¦‚ [Vite](https://cn.vite.dev/guide/why)ã€‚

åœ¨ macOS ä¸Šå¯ä»¥é€šè¿‡ homebrew æ¥å®‰è£… Node.jsï¼Œè¿è¡Œå‘½ä»¤ï¼š`brew install node` å³å¯å®Œæˆå®‰è£…ã€‚Windows æˆ–å…¶å®ƒç³»ç»Ÿå¯ä»¥å»[å®˜ç½‘](https://nodejs.org/en/download)ä¸‹è½½å®‰è£…ã€‚

è¾“å…¥å‘½ä»¤ `node -v` å¯ä»¥æŸ¥çœ‹å½“å‰ Node.js çš„ç‰ˆæœ¬å·ã€‚å¦‚æœå®‰è£…æˆåŠŸï¼Œåˆ™ä¼šè¾“å‡ºç±»ä¼¼ `v22.1.0` è¿™æ ·çš„ç‰ˆæœ¬å·ã€‚

NPM æ˜¯ Node.js çš„åŒ…ç®¡ç†å·¥å…·ï¼ˆPackage Managerï¼‰ï¼Œç”¨äºå®‰è£…å’Œç®¡ç† JavaScript åŒ…ï¼ˆPackageï¼‰ï¼Œæ‰€è°“çš„åŒ…å°±æ˜¯æŒ‡ä¸€ç»„ JavaScript ä»£ç ã€‚NPM ä¸éœ€è¦å•ç‹¬å®‰è£…ï¼Œå®‰è£… **Node.js** çš„æ—¶å€™ä¼šè‡ªåŠ¨å®‰è£… **npm**ã€‚

æ‰€è°“çš„åŒ…ç®¡ç†å·¥å…·æ˜¯ç”¨äºå®‰è£…å’Œç®¡ç†è½¯ä»¶åŒ…çš„å·¥å…·ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿåœ°è·å–ã€ç®¡ç†å’Œä½¿ç”¨å„ç§**ç¬¬ä¸‰æ–¹**åº“ï¼ˆLibraryï¼‰æˆ–æ¡†æ¶ï¼ˆFrameworkï¼‰ã€‚è¯´äººè¯å°±æ˜¯ï¼š**å¸®æˆ‘ä»¬ä¸‹è½½åˆ«äººå†™å¥½çš„ä»£ç çš„å·¥å…·**ã€‚

è¾“å…¥å‘½ä»¤ `npm -v` å¯ä»¥æŸ¥çœ‹å½“å‰ NPM çš„ç‰ˆæœ¬å·ã€‚å¦‚æœå®‰è£…æˆåŠŸï¼Œåˆ™ä¼šè¾“å‡ºç±»ä¼¼ `10.1.2` è¿™æ ·çš„ç‰ˆæœ¬å·ã€‚

**Vite** å°±æ˜¯ä¸€ä¸ªåˆ«äººå†™å¥½çš„å‰ç«¯æ„å»ºå·¥å…·ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªçœŸæ­£çš„å‰ç«¯é¡¹ç›®ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š
```bash
# ä½¿ç”¨ Vite åˆ›å»ºä¸€ä¸ªåä¸º my-vanilla-app çš„æ–°é¡¹ç›®
npm create vite@latest my-vanilla-app -- --template vanilla
# è¿›å…¥é¡¹ç›®ç›®å½•
cd my-vanilla-app
# å®‰è£…ä¾èµ–åŒ…ï¼ˆDependenciesï¼‰
npm install
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

å¦‚æœæˆ‘ä»¬çœ‹ä¸€ä¸‹ **my-vanilla-app** ç›®å½•ä¸‹çš„æ–‡ä»¶ç»“æ„ï¼š
```text
âœ  my-vanilla-app tree -L 2  
.
â”œâ”€â”€ index.html
â”œâ”€â”€ node_modules
â”‚Â Â  â”œâ”€â”€ @esbuild
â”‚Â Â  â”œâ”€â”€ @rollup
â”‚Â Â  â”œâ”€â”€ @types
â”‚Â Â  â”œâ”€â”€ esbuild
â”‚Â Â  â”œâ”€â”€ nanoid
â”‚Â Â  â”œâ”€â”€ picocolors
â”‚Â Â  â”œâ”€â”€ postcss
â”‚Â Â  â”œâ”€â”€ rollup
â”‚Â Â  â”œâ”€â”€ source-map-js
â”‚Â Â  â””â”€â”€ vite
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ package.json
â”œâ”€â”€ public
â”‚Â Â  â””â”€â”€ vite.svg
â””â”€â”€ src
    â”œâ”€â”€ counter.js
    â”œâ”€â”€ javascript.svg
    â”œâ”€â”€ main.js
    â””â”€â”€ style.css

14 directories, 8 files
```

Vite å¸®æˆ‘ä»¬åˆ›å»ºäº†å¾ˆå¤šæ–‡ä»¶å’Œæ–‡ä»¶å¤¹ã€‚å…¶ä¸­ï¼š
- **index.html** æ˜¯æˆ‘ä»¬ç½‘é¡µçš„å…¥å£ç‚¹ï¼Œå®ƒåŒ…å«äº†æˆ‘ä»¬é¡µé¢çš„ç»“æ„å’Œæ ·å¼ã€‚
- **node_modules** æ˜¯å­˜æ”¾ä¾èµ–çš„ç›®å½•ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç”¨ NPM ä¸‹è½½çš„ç¬¬ä¸‰æ–¹åŒ…ã€‚
- **package.json** å’Œ **package-lock.json** æ˜¯å­˜æ”¾ä¾èµ–ä¿¡æ¯çš„é…ç½®æ–‡ä»¶ã€‚
- **public** æ˜¯å­˜æ”¾å…¬å…±èµ„æºçš„ç›®å½•ï¼Œæ¯”å¦‚å›¾ç‰‡ã€å­—ä½“ç­‰æ–‡ä»¶ã€‚**vite.svg** æ˜¯ Vite çš„ Logo å›¾æ ‡æ–‡ä»¶ã€‚
- **src** æ˜¯å­˜æ”¾æºä»£ç çš„ç›®å½•ï¼ŒåŒ…æ‹¬æˆ‘ä»¬çš„ HTMLã€CSS å’Œ JavaScript æ–‡ä»¶ã€‚
  - **main.js** å’Œ **counter.js** æ˜¯æˆ‘ä»¬çš„ JavaScript æ–‡ä»¶ï¼Œå®ƒä»¬åŒ…å«äº†ä¸€äº›åŸºæœ¬çš„ç¤ºä¾‹é€»è¾‘ä»£ç ã€‚
  - **style.css** æ˜¯æˆ‘ä»¬çš„ CSS æ–‡ä»¶ï¼Œå®ƒåŒ…å«äº†æˆ‘ä»¬é¡µé¢çš„æ ·å¼ç¤ºä¾‹ã€‚

å¦‚æœæˆ‘ä»¬è¿è¡Œ `npm run dev`ï¼ŒVite ä¼šè‡ªåŠ¨å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼Œå¹¶æä¾›ä¸€ä¸ª URL è®©æˆ‘ä»¬é¢„è§ˆç½‘é¡µã€‚æ¯å½“ä¿®æ”¹äº†æºä»£ç åï¼ŒVite ä¼šè‡ªåŠ¨é‡æ–°ç¼–è¯‘å¹¶åˆ·æ–°æµè§ˆå™¨ã€‚

å¦‚æœæˆ‘ä»¬è¿è¡Œ `npm run build`ï¼Œä¼šå‘ç°å¤šäº†ä¸€ä¸ª **dist** æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š
```
dist
â”œâ”€â”€ assets
â”‚Â Â  â”œâ”€â”€ index-CrYBktwj.css
â”‚Â Â  â””â”€â”€ index-_AYE_jbl.js
â”œâ”€â”€ index.html
â””â”€â”€ vite.svg
```

è¿™æ˜¯å› ä¸º Vite å°†æˆ‘ä»¬ src ä¸­çš„æºä»£ç æ‰“åŒ…å¹¶è¾“å‡ºåˆ°äº† **dist** ä¸‹ã€‚æ³¨æ„çœ‹åŸæœ¬ src é‡Œçš„ **main.js** å’Œ **counter.js** 2 ä¸ªæ–‡ä»¶ç°åœ¨å˜æˆäº† 1 ä¸ª **dist/assets/index-_AYE_jbl.js**ï¼ŒVite å¸®æˆ‘ä»¬æ‰“åŒ…å‹ç¼©äº†ä»£ç ï¼Œè¿™æ ·ç”¨æˆ·è®¿é—®ç½‘é¡µæ—¶éœ€è¦ä¸‹è½½çš„æ–‡ä»¶æ›´å°ï¼ŒåŠ è½½é€Ÿåº¦æ›´å¿«ã€‚

## è¯¾åç»ƒä¹ 
1. è¾¨æç±»é¢˜ç›®ï¼š
   - **Promise** å’Œ **async/await** çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ
   - åŒæ­¥ä»£ç ä¸å¼‚æ­¥ä»£ç çš„æ ¸å¿ƒåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ


2. ä»£ç è¡¥å…¨ç»ƒä¹ ï¼š  
	å°†ä»¥ä¸‹å›è°ƒä»£ç æ”¹å†™ä¸º Promise é“¾å¼è°ƒç”¨ï¼š  

	```javascript
	// åŸä»£ç ï¼ˆå›è°ƒåµŒå¥—ï¼‰
	function fetchData(callback) {
		setTimeout(() => {
			callback("æ•°æ®åŠ è½½å®Œæˆ");
		}, 1000);
	}

	fetchData((data) => {
		console.log(data);
		fetchData((data) => {
			console.log(data);
		});
	});
	```
	ä»¥ä¸‹ä»£ç çš„è¾“å‡ºé¡ºåºæ˜¯ä»€ä¹ˆï¼Ÿ  

	```javascript
	console.log("A");
	setTimeout(() => console.log("B"), 0);
	console.log("C");
	```

3. å°å‹å®æˆ˜é¡¹ç›®ï¼šä½¿ç”¨ Vite åˆ›å»ºä¸€ä¸ªç®€å•çš„å¾…åŠäº‹é¡¹åº”ç”¨ï¼ŒåŠŸèƒ½åŒ…æ‹¬ï¼š
   - ä¸€ä¸ªåˆ—è¡¨æ˜¾ç¤ºæ‰€æœ‰ä»»åŠ¡
   - ç½‘é¡µåŠ è½½åä½¿ç”¨ Fetch API ä»åç«¯è·å– 3 æ¡ä»£åŠäº‹é¡¹å¹¶æŠŠå®ƒä»¬çš„æ ‡é¢˜ï¼ˆtitleï¼‰æ˜¾ç¤ºåœ¨åˆ—è¡¨ä¸­ã€‚
     - ä½¿ç”¨è¿™ä¸ªåç«¯æ¥å£ï¼ˆEndpointï¼‰ `https://jsonplaceholder.typicode.com/todos/${id}` 
     - ä¸‰æ¡ä»£åŠäº‹é¡¹çš„ id åˆ†åˆ«æ˜¯ 1, 2, 3ï¼Œç‚¹å‡»ä¸‹é¢çš„ä¸‰ä¸ªé“¾æ¥å¯ä»¥é¢„è§ˆå®ƒä»¬è¿”å›çš„æ•°æ®ï¼š
       - https://jsonplaceholder.typicode.com/todos/1
       - https://jsonplaceholder.typicode.com/todos/2
       - https://jsonplaceholder.typicode.com/todos/3
   - ç‚¹å‡»â€œåˆ é™¤â€æŒ‰é’®åˆ é™¤ç¬¬ä¸€ä¸ªä»»åŠ¡ï¼ˆä»ç½‘é¡µåˆ—è¡¨é‡Œç§»é™¤å³å¯ï¼‰
   - ç‚¹å‡»â€œéšæœºâ€æŒ‰é’®éšæœºä»åç«¯è·å–ä¸€ä¸ªä»»åŠ¡ï¼Œå¹¶æŠŠæ ‡é¢˜ï¼ˆtitleï¼‰æ˜¾ç¤ºåˆ°åˆ—è¡¨ä¸­ï¼ˆid èŒƒå›´ 1 - 100ï¼‰

## å‚è€ƒç­”æ¡ˆ

1. **Promise** å’Œ **async/await** çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ
   1. Promise æ˜¯å¼‚æ­¥æ“ä½œçš„å°è£…ï¼Œé€šè¿‡ .then() é“¾å¼è°ƒç”¨å¤„ç†ç»“æœã€‚
   2. async/await æ˜¯ Promise çš„è¯­æ³•ç³–ï¼Œç”¨åŒæ­¥å†™æ³•å¤„ç†å¼‚æ­¥é€»è¾‘ã€‚async å‡½æ•°è¿”å› Promiseï¼Œawait ä¼šæš‚åœå‡½æ•°æ‰§è¡Œç›´åˆ° Promise å®Œæˆã€‚
2. åŒæ­¥ä»£ç ä¸å¼‚æ­¥ä»£ç çš„æ ¸å¿ƒåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ
   - åŒæ­¥ä»£ç æŒ‰é¡ºåºæ‰§è¡Œï¼Œä¼šé˜»å¡åç»­ä»£ç ç›´åˆ°å®Œæˆï¼›å¼‚æ­¥ä»£ç å°†ä»»åŠ¡äº¤ç»™æµè§ˆå™¨/ç¯å¢ƒåå°å¤„ç†ï¼Œä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œåç»­ä»£ç ï¼Œå¾…å¼‚æ­¥ä»»åŠ¡å®Œæˆåé€šè¿‡å›è°ƒ/Promiseç­‰æœºåˆ¶å¤„ç†ç»“æœã€‚
3. ä»£ç è¡¥å…¨å‚è€ƒï¼š  
	å°†ä»¥ä¸‹å›è°ƒä»£ç æ”¹å†™ä¸º Promise é“¾å¼è°ƒç”¨ï¼š  

	```javascript
	function fetchData() {
		return new Promise(resolve => {
			setTimeout(() => {
				resolve("æ•°æ®åŠ è½½å®Œæˆ");
			}, 1000);
		});
	}

	fetchData()
		.then(data => {
			console.log(data);
			return fetchData();
		})
		.then(console.log);
	```
	ä»¥ä¸‹ä»£ç çš„è¾“å‡ºé¡ºåºæ˜¯ä»€ä¹ˆï¼Ÿ  

	```javascript
	console.log("A");
	setTimeout(() => console.log("B"), 0);
	console.log("C");
	// A
	// C
	// B
	```
4. å°å‹å®æˆ˜é¡¹ç›®ï¼šä½¿ç”¨ Vite åˆ›å»ºä¸€ä¸ªç®€å•çš„å¾…åŠäº‹é¡¹åº”ç”¨
   	```html
   	<!-- index.html -->
	<!doctype html>
	<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<link rel="icon" type="image/svg+xml" href="/vite.svg" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Vite App</title>
	</head>
	<body>
		<div class="container">
			<h1>Todo List</h1>
			<div class="button-group">
				<button id="deleteFirst">åˆ é™¤ç¬¬ä¸€ä¸ªä»»åŠ¡</button>
				<button id="addRandom">æ·»åŠ éšæœºä»»åŠ¡</button>
			</div>
			<ul id="todo-list"></ul>
		</div>
		<script type="module" src="/src/todo.js"></script>
	</body>
	</html>
	```
   	```javascript
	// src/todo.js
	let todos = []

	// åˆå§‹åŒ–åŠ è½½
	window.onload = async () => {
		try {
			const responses = await Promise.all(
				[1, 2, 3].map(id => 
					fetch(`https://jsonplaceholder.typicode.com/todos/${id}`)
				)
			)
			const data = await Promise.all(responses.map(res => res.json()))
			todos = data
			renderTodos()
		} catch (error) {
			console.error('åˆå§‹åŒ–åŠ è½½å¤±è´¥:', error)
		}
	}

	// æ¸²æŸ“ä»»åŠ¡åˆ—è¡¨
	function renderTodos() {
	const list = document.getElementById('todo-list')
	list.innerHTML = '' // æ¸…ç©ºå½“å‰åˆ—è¡¨

	todos.forEach(todo => {
		const li = document.createElement('li')
		if (todo.completed) li.classList.add('completed')
		
		li.innerHTML = `
		<span>${todo.title}</span>
		<span>${todo.completed ? 'âœ…' : 'â³'}</span>
		`
		list.appendChild(li)
	})
	}

	// åˆ é™¤ç¬¬ä¸€ä¸ªä»»åŠ¡
	function deleteFirst() {
	if (todos.length === 0) return
	todos = todos.slice(1)
	renderTodos()
	}

	// æ·»åŠ éšæœºä»»åŠ¡
	async function addRandom() {
	try {
		const randomId = Math.floor(Math.random() * 100) + 1
		const response = await fetch(
		`https://jsonplaceholder.typicode.com/todos/${randomId}`
		)
		const newTodo = await response.json()
		todos.push(newTodo)
		renderTodos()
	} catch (error) {
		console.error('è·å–éšæœºä»»åŠ¡å¤±è´¥:', error)
	}
	}

	document.getElementById("deleteFirst").addEventListener("click", deleteFirst);
	document.getElementById("addRandom").addEventListener("click", addRandom);
	```
